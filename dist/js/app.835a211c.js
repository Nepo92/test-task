(function(){var t={3790:function(t,e,i){"use strict";var n=i(9242),a=i(1857),s=i(3396),o=i(4870),r=i(7139),l=i(5410),c=i.n(l),d=i(6265),u=i.n(d);u().defaults.baseURL="https://api.openweathermap.org";const p="bbb8ed948b9970c6454c203515a9c0fe",g=async t=>{const e=await u().get(`/geo/1.0/direct?${t}&appid=${p}`);return e.data},_=async t=>{const e=await u().get(`data/2.5/weather?${t}&appid=${p}`);return e.data},m=()=>({getWeatherInCity:_,getCityCoordinates:g});i(1703);const y=(t,e)=>{if(!t.q)throw new Error("Не понятно какой город добавлять");if(e.value.length>2)throw new Error("Больше 3 нельзя")},w=(t,e)=>{const i=t.value.find((t=>t.name===e.name));if(i)throw new Error("Такой город уже есть")},v=()=>({validate:y,validateSameCity:w}),f=t=>{const{cityWidget:e,city:i,icons:n}=t;e.lat=i.lat,e.lon=i.lon,"Clouds"===e.weather[0].main?e.icon=n.find((t=>"Clouds"===t.name)).path:"Clear"===e.weather[0].main?e.icon=n.find((t=>"Clear"===t.name)).path:"Rain"===e.weather[0].main?e.icon=n.find((t=>"Rain"===t.name)).path:"Snow"===e.weather[0].main?e.icon=n.find((t=>"Snow"===t.name)).path:"Thunderstorm"===e.weather[0].main&&(e.icon=n.find((t=>"Thunderstorm"===t.name)).path);const a=Math.round(e.main.temp-273),s=Math.round(e.main.feels_like-273),o=e.weather[0].description[0].toUpperCase()+e.weather[0].description.slice(1),r=Math.round(e.wind.speed);e.main.temp=a,e.main.feels_like=s,e.weather[0].description=o,e.wind.speed=r},h=()=>({addCityInWidget:f});var b=i.p+"img/sun.9b4316b1.svg",S=i.p+"img/rain.5412892d.svg",C=i.p+"img/snow.4672e590.svg",k=i.p+"img/cloudy.2b5cac52.svg",P=i.p+"img/thunder.00592116.svg";const O=(0,a.Q_)("widget",(()=>{const t=[{name:"Clouds",path:k},{name:"Clear",path:b},{name:"Rain",path:S},{name:"Snow",path:C},{name:"Thunderstorm",path:P}],e=(0,o.qj)({lat:0,lon:0}),i=(0,o.qj)({q:"",limit:1}),n=(0,o.qj)({lat:0,lon:0});return{icons:t,queryParamsEmpty:e,queryParamsCoordinates:i,queryParamsWeather:n}}));var q=i(6983),W=i.n(q);const j={class:"widget-settings"},U={class:"widget-settings__list"},L={class:"widget-settings__item head"},I=(0,s._)("span",{class:"settings-item__title"},"Settings",-1),z={class:"widget-settings__item cities"},E={class:"city"},D={class:"city__info"},T=(0,s._)("div",{class:"city__burger"},[(0,s._)("span",{class:"city-burger__row"})],-1),M={class:"settings-item__name city__name"},x=["onClick"],H={class:"widget-settings__item add-city"},N=(0,s._)("p",{class:"settings-item__name"},"Type city name",-1),F={class:"add-city__nav"};var J=(0,s.aZ)({__name:"WidgetSettings",props:{appProps:{type:Object,required:!0}},setup(t){const e=t,{getCityCoordinates:i,getWeatherInCity:a}=m(),{icons:l,queryParamsWeather:d,queryParamsCoordinates:u}=O(),{openSettings:p,citiesList:g,isLoading:_}=e.appProps,{validate:y,validateSameCity:w}=v(),{addCityInWidget:f}=h(),b=async t=>{const e=t.target;y(u,g),e.style.pointerEvents="none";try{_.value=!0;const t=c().stringify(u),[n]=await i(t);d.lat=n.lat,d.lon=n.lon,w(g,n);const s=c().stringify(d),o=await a(s),r={cityWidget:o,city:n,icons:l};f(r),g.value.push(o),localStorage.setItem("citiesList",JSON.stringify(g.value)),u.q=""}catch(n){console.info(n)}finally{_.value=!1,e.style.pointerEvents="all"}},S=t=>{g.value=[...g.value.filter((e=>e.lon!==t.lon))],localStorage.setItem("citiesList",JSON.stringify(g.value))},C=()=>{localStorage.setItem("citiesList",JSON.stringify(g.value))};return(t,e)=>((0,s.wg)(),(0,s.iD)("div",j,[(0,s._)("ul",U,[(0,s._)("li",L,[I,(0,s._)("button",{class:"settings-item__close",type:"button",onClick:e[0]||(e[0]=()=>(0,o.SU)(p)())})]),(0,s._)("li",z,[(0,s.Wm)((0,o.SU)(W()),{modelValue:(0,o.SU)(g),"onUpdate:modelValue":e[1]||(e[1]=t=>(0,o.dq)(g)?g.value=t:null),"item-key":"id",handle:".city__burger",onEnd:C},{item:(0,s.w5)((({element:t})=>[(0,s._)("div",E,[(0,s._)("div",D,[T,(0,s._)("p",M,(0,r.zw)(t.name),1)]),(0,s._)("button",{class:"city__remove",type:"button",onClick:()=>S(t)},null,8,x)])])),_:1},8,["modelValue"])]),(0,s._)("li",H,[N,(0,s._)("div",F,[(0,s.wy)((0,s._)("input",{class:"add-city__input","onUpdate:modelValue":e[2]||(e[2]=t=>(0,o.SU)(u).q=t),type:"text",placeholder:"City name"},null,512),[[n.nr,(0,o.SU)(u).q]]),(0,s._)("button",{class:"add-city__btn",type:"button",onClick:e[3]||(e[3]=t=>b(t))},"Add")])])])]))}});const V=J;var Z=V;const R={class:"widget-main"},$={class:"widget-main__header"},A={class:"widget-header__location"},B={class:"widget__body"},Y={class:"widget-body__weather"},G=["src"],K={class:"widget-weather__temperature"},Q={class:"widget__description"},X={class:"widget-description__list"},tt={class:"description-list__item"},et={class:"description-list__item"},it=(0,s._)("span",{class:"description-item__wind-icon"},null,-1),nt=(0,s._)("span",{class:"description-item__barometer-icon"},null,-1),at={class:"description-list__item"},st={class:"description-list__item"};var ot=(0,s.aZ)({__name:"WidgetMain",props:{appProps:{type:Object,required:!0}},setup(t){const e=t,{openSettings:i,citiesList:n}=e.appProps;return(t,e)=>((0,s.wg)(),(0,s.iD)("div",R,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,o.SU)(n),((t,n)=>((0,s.wg)(),(0,s.iD)("ul",{key:n,class:"widget-main__wrapper"},[(0,s._)("li",$,[(0,s._)("span",A,(0,r.zw)(t.name)+", "+(0,r.zw)(t.sys.country),1),0===n?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[0]||(e[0]=()=>(0,o.SU)(i)()),type:"button",class:"widget-header__settings"})):(0,s.kq)("",!0)]),(0,s._)("li",B,[(0,s._)("div",Y,[(0,s._)("img",{class:"widget-weather__img",src:t.icon,alt:"weather"},null,8,G),(0,s._)("span",K,(0,r.zw)(t.main.temp)+"°C",1)])]),(0,s._)("li",Q,[(0,s._)("ul",X,[(0,s._)("li",tt," Feels like "+(0,r.zw)(t.main.feels_like)+"°C. "+(0,r.zw)(t.weather[0].description),1),(0,s._)("li",et,[(0,s._)("span",null,[it,(0,s.Uk)(" "+(0,r.zw)(t.wind.speed)+"m/s. ",1),nt,(0,s.Uk)(" "+(0,r.zw)(t.main.pressure)+"hPa ",1)])]),(0,s._)("li",at," Hymidity "+(0,r.zw)(t.main.humidity)+"%. Dev Point: 0°C ",1),(0,s._)("li",st," Visibility: "+(0,r.zw)(t.visibility)+"m ",1)])])])))),128))]))}});const rt=ot;var lt=rt;const ct={class:"widget-empty"};var dt=(0,s.aZ)({__name:"WidgetEmpty",props:{appProps:{type:Object,required:!0}},setup(t){const e=t,i=(0,o.iH)(),{getWeatherInCity:n}=m(),{addCityInWidget:a}=h(),{icons:r,queryParamsEmpty:l}=O(),{openSettings:d,isLoading:u,citiesList:p}=e.appProps,g=JSON.parse(localStorage.getItem("citiesList")),_=!g||!g.length;return _?u.value=!0:p.value=g,(0,s.bv)((()=>{_&&(i.value=navigator.geolocation.watchPosition((t=>{l.lat=t.coords.latitude,l.lon=t.coords.longitude})))})),(0,s.Ah)((()=>{i.value&&navigator.geolocation.clearWatch(i.value)})),(0,s.YP)(l,(async t=>{const e=c().stringify(t);if(_)try{const t=await n(e),i={lat:t.coord.lat,lon:t.coord.lon},s={cityWidget:t,city:i,icons:r};a(s),p.value.push(t),localStorage.setItem("citiesList",JSON.stringify(p.value))}catch(i){console.info(i)}finally{u.value=!1}})),(t,e)=>((0,s.wg)(),(0,s.iD)("div",ct,[(0,s._)("button",{class:"widget-empty__btn",type:"button",onClick:e[0]||(e[0]=()=>(0,o.SU)(d)())})]))}});const ut=dt;var pt=ut,gt=i.p+"img/loader.7c4b6f25.svg";const _t={class:"loader"},mt=["src"];var yt=(0,s.aZ)({__name:"GlobalLoader",setup(t){return(t,e)=>((0,s.wg)(),(0,s.iD)("div",_t,[(0,s._)("img",{src:(0,o.SU)(gt),alt:"loader"},null,8,mt)]))}});const wt=yt;var vt=wt;const ft={class:"widget"},ht=(0,s._)("a",{class:"widget__link",href:"https://github.com/Nepo92/test-task"},"Ссылка на репозиторий проекта в github",-1);var bt=(0,s.aZ)({__name:"App",setup(t){const e=(0,o.iH)(!1),i=(0,o.iH)([]),a=(0,o.iH)(!1),r=(0,s.Fl)((()=>Boolean(!e.value&&!i.value.length))),l=(0,s.Fl)((()=>Boolean(!e.value&&i.value.length))),c=()=>{e.value=!e.value},d={isOpenSettings:e,openSettings:c,citiesList:i,isLoading:a};return(t,e)=>((0,s.wg)(),(0,s.iD)("div",ft,[(0,o.SU)(r)?((0,s.wg)(),(0,s.j4)(pt,{key:0,appProps:d})):(0,o.SU)(l)?((0,s.wg)(),(0,s.j4)(lt,{key:1,appProps:d})):((0,s.wg)(),(0,s.j4)(Z,{key:2,appProps:d})),(0,s.wy)((0,s.Wm)(vt,null,null,512),[[n.F8,a.value]]),ht]))}});const St=bt;var Ct=St;const kt=(0,a.WB)(),Pt=(0,n.ri)(Ct);Pt.use(kt),Pt.mount("#app")},4654:function(){}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(e,n,a,s){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],s=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((function(t){return i.O[t](n[l])}))?n.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,a,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p=""}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,s,o=n[0],r=n[1],l=n[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var d=l(i)}for(e&&e(n);c<o.length;c++)s=o[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(d)},n=self["webpackChunktest_task"]=self["webpackChunktest_task"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(3790)}));n=i.O(n)})();
//# sourceMappingURL=app.835a211c.js.map